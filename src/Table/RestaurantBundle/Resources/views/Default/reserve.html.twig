{% extends "TableMainBundle::layout4modal.html.twig" %}
{% block javascripts %}
    {{ parent() }}
<script src="{{ asset('bundles/tablemain/js/jquery-ui-1.10.3.custom.js') }}"></script>
<script src="{{ asset('bundles/applicationsonatauser/js/jquery.form.js') }}"></script>
{# FANCYBOX #}
<script src="{{ asset('bundles/tablemain/js/jquery.fancybox-1.3.4.js') }}"></script>
{# FANCYBOX #}
<script src="{{ asset('bundles/tablemain/js/cusel-min-2.5.js') }}"></script>
<script>
    $(function() {
        $('#table-order-form').submit(function() {
            $(this).ajaxSubmit({
                type: 'post',
                success: function(response) {
                    $("#table-order-form-container").html(response);
                }
            });
            return false;
        });
        var params = {
            changedEl: ".table-order-form select",
            visRows: 8,
            scrollArrows: true
        }
        cuSel(params);
        $("a#restaurantMap").fancybox({
        });
        $('.reserveDate').datepicker({
            dateFormat: 'yy-mm-dd',
            altField: "#tableOrderForm_reserveDate",
            altFormat: "yy-mm-dd"
        })
    });
</script>

    {{ form_javascript(form) }}
{% endblock %}      
{% block stylesheets %}
    {{ parent() }}
<link rel="stylesheet" type="text/css" href="{{ asset('bundles/tablemain/css/jquery-ui-1.10.3.custom.css') }}">
{# FANCYBOX #}
<link rel="stylesheet" type="text/css" href="{{ asset('bundles/tablemain/css/jquery.fancybox-1.3.4.css') }}">
{# FANCYBOX #}
<link rel="stylesheet" type="text/css" href="{{ asset('bundles/tablemain/css/cusel.css') }}">
    {{ form_stylesheet(form) }}
{% endblock %}
{% block content %}
<div id="table-order-form-container">  
    {% for type, messages in app.session.flashBag.all %}
        {% for message in messages %}
    <div class="{{ type }}">
                {{ message|trans({}, 'FOSUserBundle') }}
    </div>
        {% endfor %}
    {% endfor %}
    <form novalidate id="table-order-form" action="{{ path('table_order_reserve', {'id': restaurant.id}) }}" {{ form_enctype(form) }} method="POST" class="table-order-form">       
{{ form_start(form) }}
    {{ form_errors(form) }}
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span5">
                    <div class="row-fluid">
                        {{ form_label(form.reserveDate) }}
                        <div class="reserveDate">
                        </div>        
                {{ form_errors(form.reserveDate) }}
                {% if form.reserveDate.vars.errors|length %}
                    {{ form_widget(form.reserveDate, {'attr':{'class':'error-form-reserve'} }) }}
                {%  else %}
                    {{ form_widget(form.reserveDate) }}
                {% endif %}
                    </div>
                    <div class="row-fluid">     
                {{ form_label(form.reserveTime) }}
                {{ form_errors(form.reserveTime) }}
                {% if form.reserveTime.vars.errors|length %}
                    {{ form_widget(form.reserveTime, {'attr':{'class':'error-form-reserve'} }) }}
                {%  else %}
                    {{ form_widget(form.reserveTime) }}
                {% endif %}
                      </div>
                        </div>
                        <div class="span6">
                            <div class="restaurant-photo-modal">
                            <a id="restaurantMap" href="{{ publicMapURL }}">
                            {% thumbnail restaurant.mapPhoto, 'reference' %}
                            </a>     
                        </div>
                    </div>
                </div>    
                <div class="row-fluid">
                <div class="span5">
                    <div class="span3">
                        {{ form_label(form.tableNumber) }}
                        {{ form_errors(form.tableNumber) }}
                        {% if form.tableNumber.vars.errors|length %}
                            {{ form_widget(form.tableNumber, {'attr':{'class':'error-form-reserve'} }) }}
                        {%  else %}
                            {{ form_widget(form.tableNumber) }}
                        {% endif %}
                    </div>
                    <div class="span3">
                       {{ form_label(form.peopleCount) }}
                       {{ form_errors(form.peopleCount) }}
                       {% if form.peopleCount.vars.errors|length %}
                           {{ form_widget(form.peopleCount, {'attr':{'class':'error-form-reserve'} }) }}
                       {%  else %}
                           {{ form_widget(form.peopleCount) }}
                       {% endif %}
                    </div>
                </div>
                <div class="span6">
                      {{ form_errors(form.floor) }}
                        {% if form.floor.vars.errors|length %}
                            {{ form_widget(form.floor, {'attr':{'class':'error-form-reserve'} }) }}
                        {%  else %}
                            {{ form_widget(form.floor) }}
                        {% endif %}
                    <ul class="floor-tabs">
                        {% for i in 1..restaurant.floors %}
                        <li>
                            <a href="#" onclick="page.tableOrder.selectFloor(this, i); return false;">
                            {{ i }} {% trans %}main.order.form.label.floor{% endtrans %}
                            </a>
                        </li>
                        {% endfor %}                   
                    </ul>    
                </div>  
            </div>
            <div class="row-fluid">
                <div class="span5">
                    <div class="choose-zone">
                        <p>
                                {{ form_errors(form.isSms) }}
                                {% if form.isSms.vars.errors|length %}
                                    {{ form_widget(form.isSms, {'attr':{'class':'error-form-reserve'} }) }}
                                {%  else %}
                                    {{ form_widget(form.isSms) }}
                                {% endif %}
                                {{ form_label(form.isSms) }}
                        </p>
                        <p>    
                                {{ form_errors(form.isEmail) }}
                                {% if form.isEmail.vars.errors|length %}
                                    {{ form_widget(form.isEmail, {'attr':{'class':'error-form-reserve'} }) }}
                                {%  else %}
                                    {{ form_widget(form.isEmail) }}
                                {% endif %}
                                {{ form_label(form.isEmail) }}
                        </p>
                        <p>
                                {{ form_label(form.isSmokingZone) }}
                                {{ form_errors(form.isSmokingZone) }}
                                {% if form.isSmokingZone.vars.errors|length %}
                                 {{ form_widget(form.isSmokingZone, {'attr':{'class':'error-form-reserve'} }) }}
                                {%  else %}
                                        {{ form_widget(form.isSmokingZone) }}
                                 {% endif %}
                        </p>
                    </div>       
                </div>
                <div class="span6">
                        {{ form_errors(form.wish) }}
                        {% if form.wish.vars.errors|length %}
                            {{ form_widget(form.wish, {'attr':{'class':'error-form-reserve'} }) }}
                        {%  else %}
                            {{ form_widget(form.wish) }}
                        {% endif %}
                </div>
            </div> 
            <div class="row-fluid">
                <div class="span12">
                    <div class="captcha-img">
                        <!--<div class="span3">
                            {{ form_label(form.captcha) }}
                        </div>-->
                        <div class="span5">
                        {{ form_errors(form.captcha) }}

                        {% if form.captcha.vars.errors|length %}
                        {{ form_widget(form.captcha, {'attr':{'class':'error-form-reserve'} }) }}
                        {%  else %}
                            {{ form_widget(form.captcha) }}
                        {% endif %}
                        </div>
                    </div>
                    <div class="span6">
                        <div class="button-reserve">
                            <input type="submit" value="{% trans %}main.order.form.label.submit{% endtrans %}" />
                        </div>
                    </div>
                </div>
            </div> 
        </div>
{{ form_end(form) }}
    </form>    
</div>    
{% endblock content %}
