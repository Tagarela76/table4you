{% extends 'TableMainBundle::layout.html.twig' %}
{% block javascripts %}
    {{ parent() }}
<script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
<script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
{# Rating #}
<script>
    // Rating
    $(function(){ 
        $('.rating').rating({
                callback: function(value, link){ 
                    var restaurantId = $(this).attr('restaurantId');
                    $.ajax({
                        url: Routing.generate('table_update_restaurant_rating'),
                        data: {restaurantId: restaurantId, value: value, objId: restaurantId},
                        type: "POST",
                        dataType: "html",
                        success: function(responce) {
                            location.reload();
                            //$('.restaurant-rating-'+restaurantId).html(responce);
                        }
                    });
                }
            });
        
        // Init calendar
         $( "#datepickerCalendar" ).datepicker({
            showOn: "button",
            buttonImage: "{{ asset('bundles/tablemain/images/calendar.jpeg') }}",
            buttonImageOnly: true
         });
    });
        
</script> 
<script src="{{ asset('bundles/tablemain/rating/jquery.rating.js') }}"></script>
<script src="{{ asset('bundles/tablemain/js/jquery-ui-1.10.3.custom.js') }}"></script>
{# Rating #}
{% endblock %}    
{% block stylesheets %}
    {{ parent() }}
    {# Rating #}
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/tablemain/rating/jquery.rating.css') }}">
    {# Rating #}
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/tablemain/css/jquery-ui-1.10.3.custom.css') }}">
{% endblock %}    
{% block content %}
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span2">
                {% trans %}main.order.history.search{% endtrans %}
            </div>
            <div class="span6">
                <input type="text" id="datepickerCalendar" />
            </div>
            <div class="span4">
                <form class="form-search">
                    <div class="input-append">
                    <input type="text" class="search-query">
                    <button type="submit" class="btn">Search</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="row-fluid">
            <table class="table">
                <thead>
                    <th>
                        {% trans %}main.order.history.date{% endtrans %}
                    </th>
                    <th>
                        {% trans %}main.order.history.time{% endtrans %}
                    </th>
                    <th>
                        {% trans %}main.order.history.name{% endtrans %}
                    </th>
                    <th>
                        {% trans %}main.order.history.rating{% endtrans %}
                    </th>
                </thead>
                <tbody>
                {% include "TableRestaurantBundle:Default:viewTableOrderHistory_content.html.twig" %}
                </tbody>
            </table>
        </div>
        <div class="row-fluid">
            {# display navigation #}
            <div class="navigation">
                    {{ knp_pagination_render(tableOrderHistory) }}
            </div>   
        </div>
    </div>     
{% endblock %}    